# CodeClarity Development Environment

<br>

<div align="center">
    <img src="https://user-images.githubusercontent.com/124595411/235138790-d86cc2b8-e3ef-43eb-846c-38055748c9db.svg" width="400px" />
</div>

<br>

## Overview

This repository contains all the necessary tools and dependencies to develop on CodeClarity. It includes Docker containers, build scripts, and configuration files required to set up your local development environment.

## License

This project is licensed under the AGPL-3.0-or-later license.  You can find the full license details in the [LICENSE](./LICENSE) file.

## Requirements

*   **curl:** Used for downloading the setup script and dumps.
*   **make:** Used for automating certain build and deployment tasks.
*   **golang >= 1.24** Used for plugins and downloadable [here](https://go.dev/dl/).
*   **Docker:**  A containerization platform.  [Installation instructions](https://docs.docker.com/engine/install/) are available on the Docker website.
*   **Docker Compose:** A tool for defining and running multi-container Docker applications. [Installation instructions](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-ubuntu-20-04) can be found here.

## Setup Instructions

### 1. Download and Execute the Setup Script

This script automates the cloning of the development environment repository and initiates the setup process.
```bash
curl -O https://raw.githubusercontent.com/CodeClarityCE/codeclarity-dev/main/setup.sh && sh setup.sh
```

### 2. Update DB (Optional)

Please apply for an NVD API key [here](https://nvd.nist.gov/developers/request-an-api-key), and fill it in `codeclarity-dev/.cloud/env/.env.makefile`.

Run the command to update the knowledge DB:

```bash
make knowledge-update
```

Your development environment is now set up.

### 3. Make Commands
Once the initial configuration is complete, you no longer need to execute the setup script to start the platform. 
Use ```make``` to list all the possible actions:

```bash
# â€”â€” ðŸ¦‰ CodeClarity's Makefile ðŸ¦‰ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 
help                           Outputs this help screen
# â€”â€” Commands for the dev env ðŸ’» â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 
build                          Builds the Docker images
up                             Starts the Docker images
down                           Stops the Docker images
pull                           Pulls the Docker images
logs                           Displays the logs of the Docker images
# â€”â€” Commands to test production ðŸŽ¯ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 
build-prod                     Builds de production Docker images
up-prod                        Starts the Docker images in prod mode
down-prod                      Stops the Docker images in prod mode
# â€”â€” Commands to setup database ðŸ’¾ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 
knowledge-setup                Creates the database
knowledge-update               Updates the database
# â€”â€” Commands to dump and restore database ðŸ’¾ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 
download-dumps                 Downloads the database dump
dump-database                  Dumps the database
restore-database               Restores the database
```

## Start using the platform

You can visit [https://localhost:443](https://localhost:443) to start using the platform. You might need to accept the self-signed certificate generated by Caddy.

If you imported the dump we provide, you can connect using the following credentials:

- login: `john.doe@codeclarity.io`
- password: `ThisIs4Str0ngP4ssW0rd?`

Now, follow [this guide](https://doc.codeclarity.io/docs/0.0.0/create-analysis) to create your first analysis!

## Contributing

If you'd like to contribute code or documentation, please see [CONTRIBUTING.md](./CONTRIBUTING.md) for guidelines on how to do so.

## Reporting Issues

Please report any issues with the setup process or other problems encountered while using this repository by opening a new issue in this project's GitHub page.
